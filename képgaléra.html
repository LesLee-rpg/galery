<div class="cool-gallery-wrapper">
    <div class="gallery-container" id="gallery">
        
        <div class="gallery-slide active" onclick="window.location.href='https://www.nemethlaszlokomuves.hu/koburkolat/'">
            <div class="zoom-wrapper">
                <img src="https://e8d19146c8.clvaw-cdnwnd.com/9de2f25472d5e9e5993d948f57cba195/200002520-69cc869cca/IMG_1920-0.webp?ph=e8d19146c8" alt="Kőburkolat">
            </div>
            <div class="caption">Kőburkolat referenciák</div>
        </div>

        <div class="gallery-slide" onclick="window.location.href='https://www.nemethlaszlokomuves.hu/falazas/'">
            <div class="zoom-wrapper">
                <img src="https://e8d19146c8.clvaw-cdnwnd.com/9de2f25472d5e9e5993d948f57cba195/200000073-8ad198ad1a/20130416125958_dsc07836-8.webp?ph=e8d19146c8" alt="Téglafal">
            </div>
            <div class="caption">Téglafal építés</div>
        </div>

        <div class="gallery-slide" onclick="window.location.href='https://www.nemethlaszlokomuves.hu/falazas/'">
            <div class="zoom-wrapper">
                <img src="https://e8d19146c8.clvaw-cdnwnd.com/9de2f25472d5e9e5993d948f57cba195/200000087-9604a9604b/20120408094529_fenykep0062.webp?ph=e8d19146c8" alt="Vízesés">
            </div>
            <div class="caption">Vízesés</div>
        </div>

    </div>

    <div class="gallery-nav">
        <button type="button" onclick="prevSlide()">❮</button>
        <button type="button" onclick="nextSlide()">❯</button>
    </div>
</div>

<style>
.cool-gallery-wrapper {
    max-width: 700px;
    margin: 30px auto;
    position: relative;
    font-family: 'Inter', -apple-system, sans-serif;
}

.gallery-container {
    width: 100%;
    height: 450px;
    position: relative;
    overflow: hidden;
    border-radius: 30px; /* Még kerekebb, modernebb */
    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    background: #000;
}

.gallery-slide {
    position: absolute;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 1.2s ease-in-out;
    cursor: pointer;
    z-index: 1;
}

.gallery-slide.active {
    opacity: 1;
    z-index: 2;
}

/* --- KEN BURNS EFFEKT (Mozgó kép) --- */
.zoom-wrapper {
    width: 100%;
    height: 100%;
    overflow: hidden;
}

.gallery-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transform: scale(1);
    transition: transform 0.5s ease;
}

/* Amikor aktív a dia, elindul a lassú közelítés */
.gallery-slide.active img {
    animation: kenBurns 20s infinite alternate ease-in-out;
}

@keyframes kenBurns {
    0% { transform: scale(1) translate(0, 0); }
    100% { transform: scale(1.15) translate(-2%, -2%); }
}

/* --- MODERNEBB "PIRULA" FELIRAT --- */
.caption {
    position: absolute;
    bottom: 25px;
    left: 50%;
    transform: translateX(-50%); /* Középre igazítva modernebb */
    background: rgba(255, 235, 59, 0.9); /* Enyhén áttetsző sárga */
    backdrop-filter: blur(5px); /* Üveghatás */
    color: #000;
    padding: 8px 20px;
    border-radius: 50px; /* Pirula forma */
    font-weight: 700;
    font-size: 14px;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    box-shadow: 0 8px 15px rgba(0,0,0,0.2);
    z-index: 3;
    pointer-events: none; /* Ne zavarjon bele a kattintásba */
    transition: 0.3s ease;
    border: 1px solid rgba(255,255,255,0.3);
}

.gallery-slide:hover .caption {
    background: #fff;
    transform: translateX(-50%) translateY(-5px);
}

/* Navigáció gombok finomítása */
.gallery-nav {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 20px;
}

.gallery-nav button {
    background: #111;
    color: #ffeb3b;
    border: 1px solid #333;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 18px;
    transition: 0.3s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.gallery-nav button:hover {
    background: #ffeb3b;
    color: #000;
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(255, 235, 59, 0.3);
}

@media (max-width: 480px) {
    .gallery-container { height: 350px; }
    .caption { width: 80%; text-align: center; font-size: 12px; }
}
</style>

<script>
let currentSlide = 0;
const slides = document.querySelectorAll('.gallery-slide');
let autoPlayInterval;

function showSlide(index) {
    slides.forEach(slide => {
        slide.classList.remove('active');
        // Kicsit megállítjuk az animációt a nem aktív képeknél a teljesítmény miatt
    });
    currentSlide = (index + slides.length) % slides.length;
    slides[currentSlide].classList.add('active');
}

function nextSlide() { showSlide(currentSlide + 1); resetTimer(); }
function prevSlide() { showSlide(currentSlide - 1); resetTimer(); }

function startTimer() { autoPlayInterval = setInterval(nextSlide, 8000); } // 8 mp ideálisabb a mozgáshoz
function resetTimer() { clearInterval(autoPlayInterval); startTimer(); }

startTimer();

// Swipe és hibakezelés
const galleryEl = document.getElementById('gallery');
let touchstartX = 0;
galleryEl.addEventListener('touchstart', e => { touchstartX = e.changedTouches[0].screenX; }, {passive: true});
galleryEl.addEventListener('touchend', e => {
    let touchendX = e.changedTouches[0].screenX;
    if (touchstartX - touchendX > 50) nextSlide();
    if (touchendX - touchstartX > 50) prevSlide();
}, {passive: true});
</script>